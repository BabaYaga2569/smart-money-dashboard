<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Money Cockpit - Transactions</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>ðŸ’¸ Cockpit</h2>
    <a href="index.html">Dashboard</a>
    <a href="transactions.html" class="active">Transactions</a>
    <a href="goals.html">Goals</a>
    <a href="bills.html">Bills</a>
    <a href="cashflow.html">Cash Flow</a>
    <a href="categories.html">Categories</a>
    <a href="accounts.html">Accounts</a>
    <a href="settings.html">Settings</a>
  </div>

  <!-- Main -->
  <div class="main">
    <h1>Transactions</h1>

    <!-- Filter controls -->
    <div class="card">
      <label>
        Category:
        <select id="filterCategory">
          <option value="All">All</option>
          <option value="Groceries">Groceries</option>
          <option value="Dining">Dining</option>
          <option value="Income">Income</option>
          <option value="Shopping">Shopping</option>
        </select>
      </label>
      <button id="applyFilter">Apply Filter</button>
    </div>

    <!-- Transactions table -->
    <div class="card">
      <table id="txTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Description</th>
            <th>Category</th>
            <th>Amount</th>
          </tr>
        </thead>
        <tbody>
          <!-- Filled by JS -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Scripts -->
  <script src="assets/js/theme.js"></script>
  <script>
    // Dummy data (mirrors index.js for now)
    const transactions = [
      { date: "2024-09-12", desc: "Walmart", category: "Groceries", amount: -95.23 },
      { date: "2024-09-11", desc: "Starbucks", category: "Dining", amount: -8.75 },
      { date: "2024-09-10", desc: "Payroll Deposit", category: "Income", amount: 1427.42 },
      { date: "2024-09-08", desc: "Amazon", category: "Shopping", amount: -59.99 },
      { date: "2024-09-07", desc: "Costco", category: "Groceries", amount: -152.47 }
    ];

    function renderTable(filter = "All") {
      const tbody = document.querySelector("#txTable tbody");
      tbody.innerHTML = "";

      transactions
        .filter(t => filter === "All" || t.category === filter)
        .forEach(t => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${t.date}</td>
            <td>${t.desc}</td>
            <td>${t.category}</td>
            <td style="color:${t.amount < 0 ? 'red' : 'limegreen'}">
              ${t.amount < 0 ? '-' : '+'}$${Math.abs(t.amount).toFixed(2)}
            </td>
          `;
          tbody.appendChild(row);
        });
    }

    document.addEventListener("DOMContentLoaded", () => {
      renderTable();

      document.getElementById("applyFilter").addEventListener("click", () => {
        const filter = document.getElementById("filterCategory").value;
        renderTable(filter);
      });
    });
  </script>
</body>
</html>

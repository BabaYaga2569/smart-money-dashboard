<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Smart Money Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="theme.js" defer></script>
  <script src="payCycle.js" defer></script>
  <script src="seedAccounts.js" defer></script>
</head>
<body>
  <div class="sidebar">
    <h2>ðŸ’¡ Smart Money</h2>
    <a href="index.html">Dashboard</a>
    <a href="transactions.html">Transactions</a>
    <a href="goals.html">Goals</a>
    <a href="bills.html">Bills</a>
    <a href="categories.html">Categories</a>
    <a href="cashflow.html">Cashflow</a>
    <a href="accounts.html">Accounts</a>
    <a href="recurring.html">Recurring</a>
    <a href="spendability.html">Spendability</a>
    <a href="paycycle.html">Paycycle</a>
    <a href="settings.html">Settings</a>
  </div>

  <div class="main">
    <h1>ðŸ“Š Dashboard</h1>

    <div class="tile" id="spendTile">
      <h2>Spendability</h2>
      <p id="totalBalance"></p>
      <p id="upcomingBills"></p>
      <p id="spendableNow"></p>
      <a href="spendability.html">View All â†’</a>
    </div>

    <div class="tile" id="nextPayTile">
      <h2>Next Pay</h2>
      <div id="paycycleSummary"></div>
      <a href="paycycle.html">View All â†’</a>
    </div>

    <div class="tile" id="accountsTile">
      <h2>Accounts</h2>
      <ul id="accountsList"></ul>
      <a href="accounts.html">View All â†’</a>
    </div>

    <div class="tile" id="goalsTile">
      <h2>Goals</h2>
      <ul id="goalsList"></ul>
      <a href="goals.html">View All â†’</a>
    </div>

    <div class="tile" id="transactionsTile">
      <h2>Recent Transactions</h2>
      <ul id="transactionsList"></ul>
      <a href="transactions.html">View All â†’</a>
    </div>
  </div>

  <script>
    function loadDashboard() {
      const accounts = JSON.parse(localStorage.getItem('accounts')) || [];
      const bills = JSON.parse(localStorage.getItem('bills')) || [];
      const transactions = JSON.parse(localStorage.getItem('transactions')) || [];
      const goals = JSON.parse(localStorage.getItem('goals')) || [];

      // Spendability
      let balance = accounts.reduce((sum, acc) => sum + acc.balance, 0);
      let billTotal = bills.reduce((sum, b) => sum + b.amount, 0);
      let spendNow = balance - billTotal;
      document.getElementById('totalBalance').innerText = `Total Balance: $${balance.toFixed(2)}`;
      document.getElementById('upcomingBills').innerText = `Upcoming Bills: $${billTotal.toFixed(2)}`;
      document.getElementById('spendableNow').innerText = `Spendable Now: $${spendNow.toFixed(2)}`;

      // Accounts
      document.getElementById('accountsList').innerHTML = accounts.map(a =>
        `<li>${a.name}: $${a.balance.toFixed(2)}</li>`).join("");

      // Goals
      document.getElementById('goalsList').innerHTML = goals.map(g =>
        `<li>${g.name}: ${((g.saved / g.target) * 100).toFixed(0)}% funded</li>`).join("");

      // Transactions
      document.getElementById('transactionsList').innerHTML = transactions.slice(-5).map(t =>
        `<li>${t.date} - ${t.description} ($${t.amount.toFixed(2)})</li>`).join("");
    }
    loadDashboard();
  </script>
</body>
</html>

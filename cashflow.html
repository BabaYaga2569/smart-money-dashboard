<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Money Tracker - Cash Flow</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script defer src="themes.js"></script>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>ðŸ’° Tracker</h2>
    <a href="index.html">Dashboard</a>
    <a href="transactions.html">Transactions</a>
    <a href="accounts.html">Accounts</a>
    <a href="bills.html">Bills</a>
    <a href="recurring.html">Recurring</a>
    <a href="categories.html">Categories</a>
    <a href="cashflow.html" class="active">Cash Flow</a>
    <a href="goals.html">Goals</a>
    <a href="paycycle.html">Pay Cycle</a>
    <a href="spendability.html">Spendability</a>
    <a href="settings.html">Settings</a>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <h1>Cash Flow</h1>

    <div class="card">
      <h2>Monthly Income vs Expenses</h2>
      <canvas id="cashflowChart" height="100"></canvas>
    </div>
  </div>

  <script>
    const ctx = document.getElementById("cashflowChart").getContext("2d");
    const cashflowChart = new Chart(ctx, {
      type: "bar",
      data: {
        labels: ["January", "February", "March", "April", "May", "June"],
        datasets: [
          {
            label: "Income",
            data: [4500, 4700, 4400, 4800, 5000, 4900],
            backgroundColor: "rgba(46, 204, 113, 0.7)", // greenish
            borderColor: "rgba(46, 204, 113, 1)",
            borderWidth: 1
          },
          {
            label: "Expenses",
            data: [3200, 3500, 3100, 3300, 3600, 3400],
            backgroundColor: "rgba(231, 76, 60, 0.7)", // reddish
            borderColor: "rgba(231, 76, 60, 1)",
            borderWidth: 1
          }
        ]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            labels: { color: getComputedStyle(document.body).color }
          }
        },
        scales: {
          x: {
            ticks: { color: getComputedStyle(document.body).color }
          },
          y: {
            ticks: { color: getComputedStyle(document.body).color },
            beginAtZero: true
          }
        }
      }
    });

    // Ensure chart updates with theme switch
    window.addEventListener("themeChange", () => {
      cashflowChart.options.plugins.legend.labels.color = getComputedStyle(document.body).color;
      cashflowChart.options.scales.x.ticks.color = getComputedStyle(document.body).color;
      cashflowChart.options.scales.y.ticks.color = getComputedStyle(document.body).color;
      cashflowChart.update();
    });
  </script>
</body>
</html>
